---
//@ts-nocheck
import DynamicImage from "@components/helpers/DynamicImage.astro";
import caseStudy from "@data/caseStudy.json";
const { caseName, category, date, image, buttonLabel } = caseStudy.caseDetails;
---

<article class="case">
  <header class="case-header">
    <div class="hero">
      <DynamicImage imagePath={image} altText={caseName} />
    </div>

    <div class="case-details" aria-label="Case details">
      <dl class="meta">
        <div class="meta-item">
          <dt>Case Name</dt>
          <dd>{caseName}</dd>
        </div>

        <div class="meta-item">
          <dt>Category</dt>
          <dd class="category">{category}</dd>
        </div>

        <div class="meta-item">
          <dt>Date</dt>
          <dd class="date">{date}</dd>
        </div>
      </dl>

      <a href="#0" class="button">{buttonLabel}</a>
    </div>
  </header>

  <div class="body">
    {
      caseStudy.sections.map((section) => (
        <section class="block">
          {caseStudy.sections[0] === section ? (
            <h2 class="h2">{section.title}</h2>
          ) : (
            <h3 class="h3">{section.title}</h3>
          )}

          {Array.isArray(section.content) ? (
            <>
              {section.content.map((item) => (
                <p class="p">{item}</p>
              ))}
            </>
          ) : (
            <p class="p">{section.content}</p>
          )}

          {section.highlights && (
            <ul class="highlights">
              {section.highlights.map((highlight) => (
                <li>{highlight}</li>
              ))}
            </ul>
          )}

          {section.image && (
            <div class="section-media">
              <DynamicImage
                imagePath={section.image}
                altText={section.title}
                width={600}
                height={400}
              />
            </div>
          )}
        </section>
      ))
    }
  </div>
</article>

<style>
  @layer components {
  
    .case {
      padding: 40px 0 90px;
      background: #fff;
    }

    .case-header {
      max-width: 1000px;
      margin: 0 auto;
      padding: 0 24px;
      position: relative;
    }


    .hero {
      border-radius: 22px;
      overflow: hidden;
      background: #eee;
      box-shadow: 0 18px 45px rgba(17, 24, 39, 0.12);
    }

  
    .hero :global(img) {
      width: 100%;
      height: auto;
      display: block;
      object-fit: cover;
    }

    .case-details {
      width: min(720px, 100%);
      margin: 0 auto;
      margin-top: -34px; 
      background: #111;
      color: #fff;
      border-radius: 18px;
      padding: 18px 20px;
      display: grid;
      grid-template-columns: 1fr auto;
      align-items: center;
      gap: 18px;
      box-shadow: 0 16px 40px rgba(0, 0, 0, 0.22);
      position: relative;
      z-index: 2;
    }

    .meta {
      margin: 0;
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 18px;
      align-items: center;
    }

    .meta-item {
      display: grid;
      gap: 6px;
      min-width: 0;
    }

    dt {
      font-size: 11px;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      color: rgba(255, 255, 255, 0.7);
    }

    dd {
      margin: 0;
      font-size: 12px;
      font-weight: 700;
      color: #fff;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .button {
      background: #f6d36b;
      color: #111;
      text-decoration: none;
      font-size: 12px;
      font-weight: 800;
      padding: 10px 16px;
      border-radius: 999px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      white-space: nowrap;
      height: fit-content;
    }

  
    .body {
      max-width: 620px;
      margin: 34px auto 0;
      padding: 0 24px;
    }

    .block {
      margin-top: 28px;
    }

    .block:first-child {
      margin-top: 0;
    }

    .h2 {
      margin: 0 0 12px;
      font-size: 20px;
      font-weight: 900;
      color: #111;
    }

    .h3 {
      margin: 0 0 10px;
      font-size: 14px;
      font-weight: 900;
      color: #111;
    }

    .p {
      margin: 0 0 10px;
      font-size: 12px;
      line-height: 1.75;
      color: #6b7280;
    }

    .highlights {
      margin: 10px 0 0;
      padding-left: 16px;
      color: #6b7280;
      font-size: 12px;
      line-height: 1.7;
      display: grid;
      gap: 8px;
    }

    .section-media {
      margin: 18px 0 0;
      border-radius: 14px;
      overflow: hidden;
      background: #eee;
    }

    .section-media :global(img) {
      width: 100%;
      height: auto;
      display: block;
      object-fit: cover;
    }
</style>
