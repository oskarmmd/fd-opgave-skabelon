---
import data from "@data/corevalues.json";


export interface Props {
  variant?: "dark" | "light";
}

const { variant = "dark" } = Astro.props;

import IconLayers from "@icons/layers.svg";
import IconBars from "@icons/bars.svg";
import IconGlobe from "@icons/globe.svg";
import IconGear from "@icons/gear.svg";

const ICONS = {
  layers: IconLayers,
  bars: IconBars,
  globe: IconGlobe,
  gear: IconGear,
};

const title = data.title ?? "Our core values & principles";
const subtitle = data.subtitle ?? "";
const button = data.button ?? { text: "Get in touch", link: "#" };
const values = data.values ?? [];
---

<section class={`cv cv--${variant}`} aria-labelledby="cv-title">
  <div class="cv-inner">
    <div class="cv-head">
      <div class="cv-copy">
        <p class="cv-eyebrow">GROWING WITH OUR CLIENTS</p>
        <h2 id="cv-title" class="cv-title">{title}</h2>
        <p class="cv-sub">{subtitle}</p>
      </div>

      <a class="cv-cta" href={button.link}>{button.text}</a>
    </div>

    <div class="cv-cards" aria-label="Core values">
      {values.map((v) => {
        const Icon = ICONS[v.icon as keyof typeof ICONS] ?? IconLayers;

        return (
          <article class="cv-card">
            <div class="cv-icon" aria-hidden="true">
              <Icon />
            </div>

            <h3 class="cv-card-title">{v.title}</h3>
            <p class="cv-card-desc">{v.description}</p>

            <a class="cv-read" href={v.link?.url ?? "#"}>
              {v.link?.text ?? "Read More"} <span aria-hidden="true">â†’</span>
            </a>
          </article>
        );
      })}
    </div>
  </div>
</section>

<style>
  @layer components {
    
    .cv {
      padding-block: clamp(3rem, 6vw, 5rem);
    }

    .cv--dark {
      --cv-bg: #171717;
      --cv-text: #ffffff;
      --cv-muted: rgba(255, 255, 255, 0.75);

      --card-bg: #ffffff;
      --card-text: #111111;
      --card-muted: rgba(17, 17, 17, 0.65);

      --icon-bg: #111111;
      --icon-fg: #ffffff;

      --cta-bg: #ffffff;
      --cta-fg: #111111;
    }

    .cv--light {
      --cv-bg: #f5f5f5;
      --cv-text: #111111;
      --cv-muted: rgba(17, 17, 17, 0.65);

      --card-bg: #ffffff;
      --card-text: #111111;
      --card-muted: rgba(17, 17, 17, 0.65);

      --icon-bg: #111111;
      --icon-fg: #ffffff;

      --cta-bg: #111111;
      --cta-fg: #ffffff;
    }

 
    .cv {
      background: var(--cv-bg);
      color: var(--cv-text);
    }

    .cv-inner {
      max-width: 1200px;
      margin-inline: auto;
      padding-inline: clamp(1rem, 3vw, 1.5rem);
    }

    .cv-head {
      display: grid;
      grid-template-columns: 1fr auto;
      gap: 1.5rem;
      align-items: start;
      margin-bottom: clamp(1.75rem, 3.5vw, 2.5rem);
    }

    .cv-eyebrow {
      margin: 0 0 0.65rem 0;
      font-size: 0.72rem;
      letter-spacing: 0.22em;
      text-transform: uppercase;
      opacity: 0.9;
    }

    .cv-title {
      margin: 0 0 0.75rem 0;
      font-weight: 800;
      line-height: 1.1;
      font-size: clamp(1.8rem, 3.5vw, 2.6rem);
    }

    .cv-sub {
      margin: 0;
      max-width: 70ch;
      color: var(--cv-muted);
      line-height: 1.6;
      font-size: 0.95rem;
    }

    .cv-cta {
      justify-self: end;
      align-self: center;

      background: var(--cta-bg);
      color: var(--cta-fg);
      text-decoration: none;
      font-weight: 700;

      border-radius: 999px;
      padding: 0.8rem 1.35rem;
      white-space: nowrap;
    }

    .cv-cards {
      display: grid;
      grid-template-columns: repeat(4, minmax(0, 1fr));
      gap: clamp(1rem, 2.2vw, 1.5rem);
    }

    .cv-card {
      background: var(--card-bg);
      color: var(--card-text);
      border-radius: 16px;
      padding: 1.35rem 1.25rem;

      display: grid;
      gap: 0.8rem;
      align-content: start;
      min-height: 235px;
    }

    .cv-icon {
      width: 44px;
      height: 44px;
      border-radius: 999px;
      background: var(--icon-bg);
      color: var(--icon-fg);
      display: grid;
      place-items: center;
      margin-bottom: 0.25rem;
    }

    .cv-icon :global(svg) {
      width: 20px;
      height: 20px;
    }

    .cv-card-title {
      margin: 0;
      font-weight: 800;
      font-size: 1rem;
    }

    .cv-card-desc {
      margin: 0;
      color: var(--card-muted);
      line-height: 1.55;
      font-size: 0.9rem;
    }

    .cv-read {
      margin-top: auto;
      display: inline-flex;
      gap: 0.5rem;
      align-items: center;

      text-decoration: none;
      color: var(--card-text);
      font-weight: 700;
      font-size: 0.9rem;
    }

.cv-cards {
  align-items: start; 
}

.cv-card {
  height: clamp(260px, 28vw, 300px);

.cv-card:nth-child(1),
.cv-card:nth-child(3) {
  height: clamp(300px, 32vw, 360px); 
}

.cv-card a {
  font-size: clamp(0.6rem, 1.1vw, 0.9rem);
}
.cv-card-desc {
  font-size: clamp(0.6rem, 1.1vw, 0.9rem);
}

.cv-card-title {
  font-size: clamp(0.8rem, 1.2vw, 1rem);
}
.cv-card-icon {
  width: clamp(36px, 4vw, 44px);
  height: clamp(36px, 4vw, 44px);
}
 }
 @media (max-width: 572px) {
    .cv-cards {
      display: none;
    }
  }
}
</style>
