---
import faqData from "@data/faq.json";

const {
  eyebrow = "FAQ",
  title = "Customer Questions",
  class: className = "",
} = Astro.props;

const items = faqData?.faq ?? [];
---

<section class={`faq ${className}`}>
  <div class="wrap">
    <div class="card">
      <p class="eyebrow">{eyebrow}</p>
      <h2 class="title">{title}</h2>

      <div class="list">
        {items.map((item) => (
          <details class="item">
            <summary class="q">
              <span class="qText">{item.question}</span>
              <span class="toggle" aria-hidden="true"></span>
            </summary>

            <div class="a">
              {String(item.answer)
                .split("\n\n")
                .map((para) => (
                  <p>{para}</p>
                ))}
            </div>
          </details>
        ))}
      </div>
    </div>
  </div>
</section>

<style>
  .faq{ padding: 90px 0; background:#fff; }
  .wrap{ max-width:1180px; margin:0 auto; padding:0 24px; display:grid; place-items:center; }

  .card{
    width: min(980px, 100%);
    background:#f3f4f6;
    border-radius:28px;
    padding: clamp(36px, 5vw, 70px) clamp(22px, 4vw, 60px);
  }

  .eyebrow{
    margin:0 0 10px;
    text-align:center;
    font-size:12px;
    letter-spacing:.18em;
    text-transform:uppercase;
    color:#6b7280;
  }

  .title{
    margin:0 0 26px;
    text-align:center;
    font-size: clamp(28px, 3.2vw, 44px);
    line-height:1.1;
    font-weight:900;
    color:#111;
  }

  .list{
    width: min(640px, 100%);
    margin:0 auto;
    border-top:1px solid rgba(17,17,17,.10);
  }

  .item{
    border-bottom:1px solid rgba(17,17,17,.10);
    padding:16px 0;
  }

  summary{ list-style:none; }
  summary::-webkit-details-marker{ display:none; }

  .q{
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:18px;
    cursor:pointer;
    user-select:none;
  }

  .qText{ font-size:14px; font-weight:700; color:#111; }

  .toggle{
    position:relative;
    width:18px; height:18px;
    flex:0 0 18px;
    opacity:.9;
  }

  .toggle::before,
  .toggle::after{
    content:"";
    position:absolute;
    left:50%; top:50%;
    width:16px; height:2px;
    background:#111;
    transform:translate(-50%,-50%);
    border-radius:2px;
  }

  .toggle::after{ transform:translate(-50%,-50%) rotate(90deg); }
  details[open] .toggle::after{ display:none; }

  .a{
    margin-top:10px;
    padding-right:34px;
    color:#6b7280;
    font-size:12px;
    line-height:1.7;
  }

  .a p{ margin:0 0 10px; }
  .a p:last-child{ margin-bottom:0; }
</style>
