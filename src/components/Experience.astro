---
import data from "@data/experience.json";

const heading = data.heading ?? "More than 25 years of experience";
const subheading = data.subheading ?? "3000+ our clients are insured around the World";
const stats = data.stats ?? [];
---

<section class="exp" aria-label="Experience">
  <div class="exp-inner">
    <div class="exp-left">
      <p class="exp-eyebrow">EXPERIENCE</p>
      <h2 class="exp-title">{heading}</h2>
      <p class="exp-sub">{subheading}</p>
    </div>

    <div class="stats" aria-label="Experience stats">
      {stats.map((s) => (
        <div class="stat-wrap">
          <div class="stat" style={`--percent:${s.value}`} aria-label={`${s.label} ${s.value}%`}></div>
          <p class="stat-label">{s.label}</p>
        </div>
      ))}
    </div>
  </div>
</section>

<style>
  @layer components {
    .exp {
      background: var(--color-yellow, #fbc336);
      padding-block: clamp(2.75rem, 5vw, 4.75rem);
      color: #111;
    }

    .exp-inner {
      max-width: 1200px;
      margin-inline: auto;
      padding-inline: clamp(1rem, 3vw, 1.5rem);

      display: grid;
      grid-template-columns: 1.1fr 1.4fr;
      align-items: center;
      gap: clamp(1.5rem, 4vw, 3rem);
    }

    .exp-eyebrow {
      margin: 0 0 0.85rem 0;
      font-size: 0.72rem;
      letter-spacing: 0.22em;
      text-transform: uppercase;
    }

    .exp-title {
      margin: 0 0 1rem 0;
      font-weight: 800;
      line-height: 1.05;
      font-size: clamp(1.8rem, 3.4vw, 2.7rem);
      max-width: 18ch;
    }

    .exp-sub {
      margin: 0;
      font-size: 0.92rem;
      opacity: 0.9;
    }

    /* === YOUR METHOD === */
    .stats {
      --bg-color: var(--color-yellow, #fbc336);
      display: flex;
      justify-content: center;
      gap: clamp(1rem, 3vw, 2.25rem);
      align-items: flex-start;
      width: 100%;
    }

    .stat-wrap {
      display: grid;
      justify-items: center;
      gap: 0.9rem;
      text-align: center;
    }

    .stat-label {
      margin: 0;
      font-weight: 700;
      font-size: 0.95rem;
    }

    .stat {
      --p: calc(var(--percent) * 1%);
      --border-width: 6px;
      --border-color: #ffffff;
      --border-bg: #daae3c;

      aspect-ratio: 1;
      width: clamp(88px, 10vw, 118px);
      border-radius: calc(infinity * 1px);
      border: var(--border-width) solid #0000;

      background:
        radial-gradient(
          circle at 50% calc(var(--border-width) / 2),
          var(--border-color) calc(var(--border-width) / 2),
          transparent 0
        ) border-box,
        linear-gradient(var(--bg-color) 0 0) padding-box,
        conic-gradient(var(--border-color) var(--p), var(--border-bg) 0) border-box;

      display: grid;
      place-items: center;
      counter-reset: count var(--percent);
    }

    .stat::after {
      content: counter(count) "%";
      font-weight: 800;
      font-size: clamp(1.35rem, 2.3vw, 2rem);
      line-height: 1;
      transform: translateY(-20px); 
    }

    .stat::before {
      content: "";
      aspect-ratio: 1;
      border-radius: calc(infinity * 1px);
      width: calc(var(--border-width) * 3);
      background: #000;
      outline: 2px solid #fff;
      outline-offset: -4px;

      offset-path: border-box;
      offset-distance: var(--p);
      offset-anchor: 50% calc(50% - var(--border-width) / 2);
    }

  }
</style>
